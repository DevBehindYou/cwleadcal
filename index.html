<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CR Calculator</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        .container {
            display: flex;
            justify-content: center;
            align-items: center;
            margin-top: 20px;
        }

        .input-container {
            width: 53%;
        }

        .chart-container {
            width: 175px;
            height: 175px;
            margin-right: 10px;
            margin-left: 20px;
        }

        /* Style for the GIF overlay within the CR Calculator section */
        #gif-overlay {
            display: none; /* Make sure it's hidden initially */
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 10;
            justify-content: center;
            align-items: center;
            border-radius: 10px;
        }

        #gif-overlay img {
            width: 100%;
            height: 100%;
        }

        /* Position relative to the CR calculator to contain the overlay */
        #cr-calculator {
            position: relative;
            max-width: 560px;
            margin: auto;
            padding: 12px;
            border: 1px solid hsl(0, 0%, 80%);
            border-radius: 10px;
            background-color: #f9f5fb;
        }
    </style>
</head>
<body>
    <!-- CR Calculator -->
    <div id="cr-calculator">
        <img src="img.png" alt="content-whale" style="width:70px; height:70px; float: right; margin-right: 5px;">
        <h3 style="text-align: center; margin-left: 25px; font-family: 'Roboto', sans-serif; font-size: 25px; color: #47066a; margin-top: 8px; letter-spacing: 1px;">
            Wait! Do you really need SEO? <p style="text-align: left; font-size: 20px; margin-left: 175px; margin-top: 5px;">Letâ€™s check -></p>
        </h3>

        <div class="container">
            <div class="input-container">
                <label style="font-family: 'Verdana', sans-serif; font-size: 14px;" for="siteTraffic">Your Website:</label><br>
                <input type="text" id="siteAddress" placeholder="Enter your site traffic" style="width: 90%; padding: 8px; margin: 10px 0; border-radius: 7px; border-color: #6f2597;" required><br>

                <label style="font-family: 'Verdana', sans-serif; font-size: 14px;" for="siteTraffic">Web Traffic (Visitors) Per Month:</label><br>
                <input type="number" id="siteTraffic" placeholder="Enter your site traffic" style="width: 90%; padding: 8px; margin: 10px 0; border-radius: 7px;border-color: #6f2597;" required><br>

                <label style="font-family: 'Verdana', sans-serif; font-size: 14px;" for="currentCR">Leads or Conversions Per Month:</label><br>
                <input type="number" id="currentLead" placeholder="Enter your current CR" style="width: 90%; padding: 8px; margin: 10px 0; border-radius: 7px; border-color: #6f2597;" required><br>
            </div>

            <div class="chart-container">
                <canvas id="conversionChart"></canvas>
            </div>
        </div>

        <div style="text-align: center;">
            <button onclick="calculateCR()" style="width: 65%; padding: 10px; background: linear-gradient(90deg, #6f2597, #a401a4); color: white; border: none; border-radius: 11px;">
                Calculate Lead Performance/Industry Std.
            </button>
        </div>
        
        
        <p id="result" style="padding: 10px; background-color: #ffe1ff; border-radius: 5px; text-align: center; font-family: 'Roboto', sans-serif;">Enter values to see the Result</p>

        <!-- GIF Overlay within CR calculator section -->
        <div id="gif-overlay">
            <img src="gif.gif" alt="Celebration GIF">
        </div>
    </div>

    <script>
    // Initialize the chart object and a flag to track the GIF display
let conversionChart;
let gifShown = false; // Track if the GIF has been shown already

function calculateCR() {
    var siteTraffic = document.getElementById('siteTraffic').value;
    var currentLead = document.getElementById('currentLead').value;
    let msg = "", cta = "Talk to an expert ->";  // Initialize msg as a string
    var leadboost = 1; // Default value for leadboost
    var est = currentLead / siteTraffic;
    
    if(est >= 0.05) {
        msg = "Your website is killing the market. It seems like you've got the magic elixir. We want to know your secret.";
        cta ="Care to share with our experts?"
    }
    else if(est < 0.05 && est >= 0.02) {
        leadboost = 1.5; 
        msg = "Your website is optimally working currently. However, if you need to capture more market share, you should invest in brand awareness through social media channels and blogs.";
    }
    else if(est < 0.02 && est >= 0.01) {
        leadboost = 3;
        msg = "Your website is underperforming currently. SEO optimization could boost your traffic by up to 187% and increase your leads by 1.5x to 3x, depending on industry trends and competitive factors.";
    }
    else if(est < 0.01) {
        leadboost = 10;
        msg = "Your website needs a SERIOUS content refresh! An SEO revamp, site optimization, and new website content through funneling could boost your web traffic by at least 200% and potentially increase your leads by 5x to 10x.";
        cta = "Talk to an expert now!"
    }

    if (siteTraffic && currentLead) {
        var currentConversions = Number(currentLead); // Ensure it's a number
        var potentialIncrease = currentConversions * leadboost;

        document.getElementById('result').innerHTML = msg + "<br><a href='https://content-whale.com/' target='_blank'><strong>" + cta + "</strong></a>";
        /*
        // Show the GIF overlay if it hasn't been shown before
        if (!gifShown) {
            document.getElementById('gif-overlay').style.display = 'flex'; // Show the GIF

            // Hide the GIF overlay after 3 seconds
            setTimeout(function() {
                document.getElementById('gif-overlay').style.display = 'none';
            }, 2500);

            gifShown = true; // Set the flag to true, so the GIF won't show again
        } */

        // Update the chart data
        setTimeout(function() {
            updateChart(currentConversions, potentialIncrease);
        }, 500);
    } else {
        document.getElementById('result').innerHTML = "Please enter valid values for both fields.";
    }
}

function updateChart(currentConversions, potentialIncrease) {
    // If the chart already exists, destroy it
    if (conversionChart) {
        conversionChart.destroy();
    }

    // Create a new donut chart
    const ctx = document.getElementById('conversionChart').getContext('2d');
    conversionChart = new Chart(ctx, {
        type: 'doughnut',
        data: {
            labels: ['Current Leads', 'Boosted Leads'],
            datasets: [{
                label: 'Conversions',
                data: [currentConversions, potentialIncrease - currentConversions],
                backgroundColor: ['#a0a2a9', '#ffa500'],
            }]
        },
        options: {
            responsive: true,
            maintainAspectRatio: false,
            plugins: {
                legend: {
                    display: false,  // Disable the legend
                },
                tooltip: {
                    callbacks: {
                        label: function(context) {
                            const label = context.label || '';
                            const value = context.raw;
                            return label + ': ' + Math.round(value);
                        }
                    }
                }
            },
            cutout: '57%',
        }
    });
}
    </script>
</body>
</html>
